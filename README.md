
# Veins of Eridûn
### _A Living Narrative Engine_

---

> _"Eridûn. A continent balanced on a knife's edge. Ancient kingdoms and powerful guilds vie for control in a shadow war of secrets and coin. But a new age is dawning—one that will be defined not by crowns or contracts, but by power itself."_

---

Welcome, Scribe. You've stumbled upon the source code of a living world. **Veins of Eridûn** is not merely a game; it is a dynamic narrative engine powered by the Google Gemini API. It is an exploration into a grim-hopeful world of political intrigue, where a player's story is not pre-written but woven in real-time by a master storyteller AI.

This document serves as your guide to the architecture of this world, from the core concepts that give it life to the technical schematics that bind it together.

## The Flow Veins: Core Concept

Magic in this world is a raw, living force known as the **Flow**. For most, it lies dormant. But in a rare few, it awakens, manifesting as glowing, incandescent veins on the skin—a source of immense power and a mark of destiny.

The player is one of these **"Awakened,"** and their existence is a spark in the growing **Flow Schism**, a conflict that will determine the future of magic. This application is the engine that brings their story to life.

*   **Dynamic, Not Scripted**: Every description, every choice, and every consequence is generated by the AI based on a deep "World Bible" and the player's evolving character profile. No two playthroughs are the same.
*   **Player as Fulcrum**: The player is the central point upon which the world turns. Their choices directly influence their reputation, their relationships, and the very state of the world around them.

## Awakening the Engine: Key Features

This narrative engine is built upon several pillars designed for maximum immersion and player agency.

#### 📜 **Dynamic Story Generation (Gemini 2.5 Flash)**
The heart of the engine. A sophisticated system instruction and a detailed world bible guide the Gemini model, allowing it to act as a master storyteller. It crafts a continuous, coherent narrative, complete with complex NPCs, political intrigue, and meaningful choices. The model uses a streaming response to deliver text with a natural, "typed-out" feel.

#### 🌍 **Living World State**
The world remembers and reacts. The player's journey is tracked through a series of evolving data points which are fed back to the AI with every action:
*   **Journal**: Automatically updated from the character's perspective, creating a personal chronicle of their quests and discoveries.
*   **Reputation System**: Actions have consequences. Your standing with the world's major factions is tracked, opening and closing narrative paths.
*   **Dramatis Personae**: The AI logs key NPCs the player meets, remembering their relationships and a description from the player's point of view.
*   **Inventory**: Players can acquire tangible items—keys, documents, consumables—that the AI can offer as unique choices in future scenarios.

#### 🖼️ **Visual Storytelling (Imagen 3)**
Every scene is accompanied by a unique, AI-generated image. The story model generates a detailed descriptive prompt for Imagen 3, ensuring the visuals perfectly match the narrative moment, including the player character's appearance.

#### 🔊 **Immersive Audio Experience**
The soundscape is as dynamic as the story:
*   **AI-Driven Narration (Gemini TTS)**: A high-quality, AI-generated voice narrates the story, providing a richer experience than standard browser speech synthesis.
*   **Dynamic Ambient Tracks**: The AI can change the background music to match the mood of a scene—from a tense dungeon drone to the bustling sounds of a city.
*   **Sound Effects**: Key moments are punctuated with one-shot sound effects, also triggered by the AI.

#### ✨ **Player Agency & Character Depth**
The player's identity is paramount.
*   **Deep Character Creation**: Players define their character through a series of evocative, narrative choices about their origin, personality, and the physical manifestation of their power.
*   **Evolving Personality**: Choices are tied to personality leans (Empathy, Cunning, Resolve, Lore). Making these choices increases the character's score, which in turn influences how NPCs react to them.
*   **Custom Actions**: An open input field allows players to forge their own path, with the AI capable of interpreting and reacting to custom actions.

## The Architect's Schematics: Technical Deep Dive

This project is a modern, client-side web application built with a focus on clean code, performance, and a rich user experience.

*   **Framework**: **React** with **TypeScript** for a robust, type-safe component architecture.
*   **AI Integration**: **`@google/genai`** SDK for all interactions with the Gemini API, including text generation, image generation, TTS, and API Caching.
*   **State Management**: **Zustand**, a lightweight and powerful state management library. The entire game state, including character profiles, history, and UI settings, is managed in a central, persistent store.
*   **Styling**: **TailwindCSS** for a utility-first approach to creating a responsive and visually consistent design system.
*   **Performance**:
    *   **API Caching**: The large "World Bible" is cached on Google's servers to dramatically reduce token cost and improve API response times.
    *   **Image Handling**: Generated images are converted from base64 to blob URLs for better memory management.
    *   **Memoization**: React components are memoized where appropriate to prevent unnecessary re-renders.

## Scribing Your Own Saga: Running Locally

To run this engine on your local machine, you must have an active Google Gemini API key.

#### Prerequisites
*   Node.js (v18 or higher recommended)
*   A modern web browser

#### Setup Steps

1.  **Clone the Repository**
    ```bash
    git clone https://github.com/your-repo/veins-of-eridun.git
    cd veins-of-eridun
    ```

2.  **Set Up Your API Key**
    The application is configured to load the Gemini API key from `process.env.API_KEY`. You will need to ensure this environment variable is available when you run the application. The recommended way is to use a local development server that supports this.

3.  **Launch the Application**
    This project is designed to be run with a simple static server. The `index.html` file uses ES modules, so you can serve the project root. For example, using `http-server`:
    ```bash
    # If you don't have http-server, install it globally
    npm install -g http-server

    # Run the server from the project root
    http-server .
    ```
    Now, open your browser and navigate to the provided local URL (e.g., `http://127.0.0.1:8080`). The application will start.

## The World Bible: Project Structure

The codebase is organized to separate concerns, making it easier to navigate and extend.

```
/
├── public/                # Static assets would go here
├── src/
│   ├── components/        # Reusable React components (UI, game panels)
│   ├── constants/         # Core game constants (affinities, factions, etc.)
│   ├── features/          # Business logic (API services, character utils)
│   ├── lore/              # The heart of the world: system instructions & world bible
│   ├── store/             # Zustand central game store
│   ├── types/             # TypeScript type definitions
│   └── utils/             # Helper utilities (audio, image conversion, logging)
├── .gitignore
├── index.html             # The single HTML entry point
├── index.tsx              # Main React application entry point
├── metadata.json          # Project metadata
└── README.md              # This chronicle
```

---
> _"Your very existence is a spark in a growing conflict. You will be feared, hunted, and coveted for the power that surges within you. Your story begins now..."_
